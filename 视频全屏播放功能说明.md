# 📺 视频全屏播放功能说明

## ✅ 已添加全屏功能

为视频播放器添加了自定义全屏功能，支持一键全屏播放！

---

## 🎯 功能特点

### 全屏模式下：
- ✅ 隐藏顶部标题栏
- ✅ 隐藏视频列表
- ✅ 隐藏视频信息区域
- ✅ 隐藏系统状态栏
- ✅ 隐藏系统导航栏
- ✅ 视频占满整个屏幕
- ✅ 沉浸式体验

---

## 🎮 如何使用

### 进入全屏
**方法 1：点击全屏按钮**
- 在视频播放器右下角
- 图标：📐（裁剪图标）
- 点击后立即全屏

**方法 2：双击视频**
- 可以在视频区域双击（如果需要可以添加）

### 退出全屏
有三种方式退出全屏：

**方法 1：点击全屏按钮**
- 全屏模式下按钮变成 ❌（关闭图标）
- 点击退出全屏

**方法 2：按返回键**
- 按设备的返回键 ⬅️
- 先退出全屏，再次按才退出应用

**方法 3：点击顶部返回按钮**
- 点击左上角返回按钮
- 如果在全屏则退出全屏
- 否则退出应用

---

## 🎨 界面效果

### 正常模式（横屏）

```
┌─────────────────────────────────────────┐
│ ← 微课视频                               │
├──────────┬──────────────────────────────┤
│          │ [视频播放器]        [🔳]     │
│ 视频列表 │                              │
│ • 视频1  ├──────────────────────────────┤
│ • 视频2  │ 视频标题                      │
│ • 视频3  │ 视频描述...                   │
└──────────┴──────────────────────────────┘
```

### 全屏模式

```
┌─────────────────────────────────────────┐
│                                         │
│                                         │
│                                         │
│        [视频占满整个屏幕]        [❌]   │
│                                         │
│                                         │
│                                         │
└─────────────────────────────────────────┘
```

---

## 🔧 技术实现

### 1. 添加全屏按钮

在 `activity_video.xml` 中：

```xml
<ImageButton
    android:id="@+id/fullscreenButton"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:src="@android:drawable/ic_menu_crop"
    android:contentDescription="全屏"
    ... />
```

**位置：** 视频播放器右下角

### 2. 全屏逻辑

在 `VideoActivity.kt` 中：

**进入全屏：**
```kotlin
private fun enterFullScreen() {
    // 隐藏系统UI
    window.decorView.systemUiVisibility = ...
    
    // 隐藏其他UI元素
    binding.topBar?.visibility = View.GONE
    binding.videoListCard?.visibility = View.GONE
    binding.videoInfoSection?.visibility = View.GONE
}
```

**退出全屏：**
```kotlin
private fun exitFullScreen() {
    // 恢复系统UI
    // 显示其他UI元素
}
```

### 3. 返回键处理

```kotlin
override fun onBackPressed() {
    if (isFullScreen) {
        exitFullScreen()  // 先退出全屏
    } else {
        super.onBackPressed()  // 再退出应用
    }
}
```

---

## 💡 使用场景

### 适合全屏的情况：
- ✅ 观看教学视频
- ✅ 观看详细演示
- ✅ 需要看清楚细节
- ✅ 沉浸式学习体验

### 不需要全屏的情况：
- 📋 需要同时查看视频列表
- 📝 需要阅读视频描述
- 🔄 需要频繁切换视频

---

## 🎯 按钮位置

全屏按钮位于视频播放器的右下角：

```
视频播放器区域
┌─────────────────────────┐
│                         │
│     视频播放中...        │
│                         │
│                         │
│                    [🔳] │ ← 全屏按钮
└─────────────────────────┘
```

**图标说明：**
- 📐 - 进入全屏模式
- ❌ - 退出全屏模式

---

## ⚙️ 自定义配置

### 修改按钮位置

在 `activity_video.xml` 中调整：

```xml
<ImageButton
    ...
    android:layout_margin="16dp"  <!-- 调整边距 -->
    app:layout_constraintEnd_toEndOf="@id/videoPlayer"  <!-- 右对齐 -->
    app:layout_constraintBottom_toBottomOf="@id/videoPlayer"  <!-- 底部对齐 -->
    />
```

### 修改按钮图标

在 `VideoActivity.kt` 中：

```kotlin
// 进入全屏时的图标
binding.fullscreenButton?.setImageResource(android.R.drawable.ic_menu_crop)

// 退出全屏时的图标
binding.fullscreenButton?.setImageResource(android.R.drawable.ic_menu_close_clear_cancel)
```

### 修改按钮大小

```xml
<ImageButton
    android:layout_width="56dp"   <!-- 改成 56dp 更大 -->
    android:layout_height="56dp"
    ... />
```

---

## 🐛 常见问题

### Q1：按钮不显示

**原因：** 可能被其他元素遮挡

**解决：**
1. 检查 Z 轴顺序（后定义的在上层）
2. 确保按钮在 ConstraintLayout 中
3. 检查 visibility 是否为 VISIBLE

### Q2：点击没反应

**原因：** 点击事件可能被视频播放器拦截

**解决：**
1. 确保按钮有 `clickable="true"`
2. 添加 `android:elevation="4dp"` 提升层级

### Q3：全屏后无法退出

**原因：** 状态管理错误

**解决：**
- 按返回键可以退出
- 或再次点击全屏按钮

### Q4：竖屏模式没有全屏按钮

**说明：** 目前只在横屏布局中添加了全屏按钮

**如需在竖屏添加：**
在 `layout/activity_video.xml` 中添加相同的按钮代码

---

## 📊 全屏模式对比

| 特性 | 正常模式 | 全屏模式 |
|------|----------|----------|
| 视频大小 | 65% 高度 | 100% 屏幕 |
| 视频列表 | ✅ 显示 | ❌ 隐藏 |
| 视频信息 | ✅ 显示 | ❌ 隐藏 |
| 状态栏 | ✅ 显示 | ❌ 隐藏 |
| 导航栏 | ✅ 显示 | ❌ 隐藏 |
| 返回按钮 | 退出应用 | 退出全屏 |

---

## 🚀 测试清单

安装应用后测试：

- [ ] 全屏按钮显示在右下角
- [ ] 点击全屏按钮进入全屏
- [ ] 全屏后所有UI隐藏
- [ ] 全屏时视频占满屏幕
- [ ] 按钮图标变成关闭图标
- [ ] 点击按钮退出全屏
- [ ] 按返回键退出全屏
- [ ] 退出全屏后UI恢复
- [ ] 视频继续播放不中断
- [ ] 再次按返回键退出应用

---

## 💡 增强功能（可选）

### 1. 双击全屏

在 `VideoActivity.kt` 中添加：

```kotlin
binding.videoPlayer.setOnClickListener(object : View.OnClickListener {
    private var lastClickTime = 0L
    
    override fun onClick(v: View) {
        val currentTime = System.currentTimeMillis()
        if (currentTime - lastClickTime < 300) {
            // 双击
            if (isFullScreen) {
                exitFullScreen()
            } else {
                enterFullScreen()
            }
        }
        lastClickTime = currentTime
    }
})
```

### 2. 手势全屏

添加手势识别：
- 上滑进入全屏
- 下滑退出全屏

### 3. 自动全屏

播放开始后自动全屏：

```kotlin
player?.addListener(object : Player.Listener {
    override fun onIsPlayingChanged(isPlaying: Boolean) {
        if (isPlaying && !isFullScreen) {
            enterFullScreen()
        }
    }
})
```

---

## 🎬 使用建议

### 教学场景：
1. **观看演示** - 使用全屏看清细节
2. **学习步骤** - 退出全屏查看文字说明
3. **切换视频** - 退出全屏选择其他视频

### 快捷操作：
- 💡 快速学习：直接全屏观看
- 📋 详细学习：正常模式，边看边读描述
- 🔄 对比学习：退出全屏，切换不同视频

---

**实现日期：** 2026-01-01  
**功能状态：** ✅ 已完成  
**测试状态：** 请在实际设备上测试

享受全屏播放体验！🎬📺

