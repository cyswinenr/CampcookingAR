# é‡ç‚Šæ•™å­¦æ•°æ®ç®¡ç†ç³»ç»Ÿ - æ•™å¸ˆç«¯æœåŠ¡å™¨

## ğŸ“‹ ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç¬”è®°æœ¬ä¸Šçš„Python FlaskæœåŠ¡å™¨ï¼Œç”¨äºæ¥æ”¶å­¦ç”Ÿç«¯æäº¤çš„é‡ç‚Šè¿‡ç¨‹æ•°æ®ï¼Œå¹¶æä¾›æ•™å¸ˆç«¯APIæ¥å£ï¼Œæ–¹ä¾¿æ•™å¸ˆæŸ¥çœ‹å­¦ç”Ÿæ•°æ®å’Œè¿›è¡Œè¯„ä»·ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… æ¥æ”¶å­¦ç”Ÿç«¯æäº¤çš„å®Œæ•´æ•°æ®ï¼ˆå›¢é˜Ÿä¿¡æ¯ã€è¿‡ç¨‹è®°å½•ã€è¯¾åæ€»ç»“ï¼‰
- âœ… æä¾›RESTful APIæ¥å£ï¼Œæ–¹ä¾¿æ•™å¸ˆç«¯APPè¯»å–æ•°æ®
- âœ… æ”¯æŒæ•™å¸ˆè¯„ä»·åŠŸèƒ½ï¼Œå¯ä»¥å¯¹æ¯ä¸ªé˜¶æ®µè¿›è¡Œè¯„åˆ†å’Œè¯„è¯­
- âœ… æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œä½¿ç”¨JSONæ ¼å¼ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- âœ… æ”¯æŒæ•°æ®å¯¼å‡ºåŠŸèƒ½
- âœ… æä¾›ç®€å•çš„Webç®¡ç†ç•Œé¢
- âœ… è·¨åŸŸæ”¯æŒï¼ˆCORSï¼‰ï¼Œæ–¹ä¾¿ç§»åŠ¨ç«¯è®¿é—®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- ç½‘ç»œè¿æ¥ï¼ˆå±€åŸŸç½‘ï¼‰

### 2. å®‰è£…ä¾èµ–

```bash
# è¿›å…¥æœåŠ¡å™¨ç›®å½•
cd teacherserver

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

### 3. å¯åŠ¨æœåŠ¡å™¨

```bash
# è¿è¡ŒæœåŠ¡å™¨
python app.py
```

æœåŠ¡å™¨å¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
```
============================================================
ğŸ•ï¸  é‡ç‚Šæ•™å­¦æ•°æ®ç®¡ç†ç³»ç»Ÿ - æ•™å¸ˆç«¯æœåŠ¡å™¨
============================================================
æœåŠ¡å™¨åœ°å€: http://192.168.1.100:5000
Webç®¡ç†ç•Œé¢: http://192.168.1.100:5000/
APIçŠ¶æ€æŸ¥è¯¢: http://192.168.1.100:5000/api/status
============================================================
ç­‰å¾…å­¦ç”Ÿç«¯æäº¤æ•°æ®...
æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨
============================================================
```

### 4. é…ç½®å­¦ç”Ÿç«¯

åœ¨å­¦ç”Ÿç«¯APPä¸­ï¼Œè¾“å…¥æœåŠ¡å™¨æ˜¾ç¤ºçš„IPåœ°å€ï¼ˆä¾‹å¦‚ï¼š`192.168.1.100`ï¼‰ï¼Œç„¶åæäº¤æ•°æ®ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
teacherserver/
â”œâ”€â”€ app.py              # Flaskä¸»åº”ç”¨
â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ storage.py          # æ•°æ®å­˜å‚¨ç®¡ç†
â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ README.md           # ä½¿ç”¨è¯´æ˜
â””â”€â”€ data/               # æ•°æ®å­˜å‚¨ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
    â”œâ”€â”€ students/       # å­¦ç”Ÿæ•°æ®
    â”œâ”€â”€ media/          # åª’ä½“æ–‡ä»¶
    â”œâ”€â”€ evaluations/    # æ•™å¸ˆè¯„ä»·
    â””â”€â”€ exports/        # å¯¼å‡ºæ–‡ä»¶
```

## ğŸ”Œ APIæ¥å£æ–‡æ¡£

### 1. è·å–æœåŠ¡å™¨çŠ¶æ€

```
GET /api/status
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "running",
  "students": 5,
  "timestamp": "2024-01-15T14:30:00",
  "server_ip": "192.168.1.100",
  "port": 5000
}
```

### 2. æäº¤å­¦ç”Ÿæ•°æ®ï¼ˆå­¦ç”Ÿç«¯ä½¿ç”¨ï¼‰

```
POST /api/submit
Content-Type: application/json
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "teamInfo": {
    "school": "ç¬¬ä¸€ä¸­å­¦",
    "grade": "7",
    "className": "1ç­",
    "stoveNumber": "1",
    "memberCount": 4,
    "memberNames": "å¼ ä¸‰,æå››,ç‹äº”,èµµå…­"
  },
  "processRecord": {
    "startTime": 1705296000000,
    "stages": {
      "PREPARATION": {
        "stage": "PREPARATION",
        "startTime": 1705296000000,
        "endTime": 1705296300000,
        "selfRating": 4,
        "isCompleted": true,
        ...
      }
    }
  },
  "summaryData": {
    "answer1": "...",
    "answer2": "...",
    "answer3": "..."
  },
  "exportTime": 1705296000000
}
```

**å“åº”ï¼š**
```json
{
  "status": "success",
  "studentId": "ç¬¬ä¸€ä¸­å­¦_7_1ç­_1",
  "message": "æ•°æ®æ¥æ”¶æˆåŠŸ"
}
```

### 3. è·å–æ‰€æœ‰å­¦ç”Ÿåˆ—è¡¨ï¼ˆæ•™å¸ˆç«¯ä½¿ç”¨ï¼‰

```
GET /api/students
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "success",
  "students": [
    {
      "id": "ç¬¬ä¸€ä¸­å­¦_7_1ç­_1",
      "teamName": "ç¬¬ä¸€ä¸­å­¦ 7å¹´çº§ 1ç­ ç‚‰å·1",
      "school": "ç¬¬ä¸€ä¸­å­¦",
      "grade": "7",
      "className": "1ç­",
      "stoveNumber": "1",
      "memberCount": 4,
      "memberNames": "å¼ ä¸‰,æå››,ç‹äº”,èµµå…­",
      "submitTime": 1705296000.0,
      "hasProcessRecord": true,
      "hasSummary": true,
      "completedStages": 5,
      "totalStages": 7
    }
  ],
  "count": 1
}
```

### 4. è·å–æŒ‡å®šå­¦ç”Ÿè¯¦ç»†æ•°æ®ï¼ˆæ•™å¸ˆç«¯ä½¿ç”¨ï¼‰

```
GET /api/student/<student_id>
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "success",
  "data": {
    "teamInfo": {...},
    "processRecord": {...},
    "summaryData": {...},
    "teacherEvaluation": {...}
  }
}
```

### 5. è·å–å­¦ç”Ÿè¯„ä»·ï¼ˆæ•™å¸ˆç«¯ä½¿ç”¨ï¼‰

```
GET /api/student/<student_id>/evaluation
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "success",
  "evaluation": {
    "PREPARATION": {
      "stage": "PREPARATION",
      "rating": 4,
      "comment": "å‡†å¤‡å……åˆ†",
      "strengths": "å·¥å…·é½å…¨",
      "improvements": "å¯ä»¥æ›´å¿«",
      "timestamp": 1705296000000
    }
  }
}
```

### 6. ä¿å­˜æ•™å¸ˆè¯„ä»·ï¼ˆæ•™å¸ˆç«¯ä½¿ç”¨ï¼‰

```
POST /api/student/<student_id>/evaluation
Content-Type: application/json
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "evaluation": {
    "stage": "PREPARATION",
    "rating": 4,
    "comment": "å‡†å¤‡å……åˆ†ï¼Œå·¥å…·é½å…¨",
    "strengths": "å›¢é˜Ÿåä½œå¥½",
    "improvements": "å¯ä»¥æ›´å¿«ä¸€äº›"
  }
}
```

**å“åº”ï¼š**
```json
{
  "status": "success",
  "message": "è¯„ä»·ä¿å­˜æˆåŠŸ"
}
```

### 7. è·å–ç»Ÿè®¡æ•°æ®ï¼ˆæ•™å¸ˆç«¯ä½¿ç”¨ï¼‰

```
GET /api/statistics
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "success",
  "statistics": {
    "totalStudents": 10,
    "studentsWithProcess": 8,
    "studentsWithSummary": 6,
    "averageCompletion": 75.5,
    "totalCompletedStages": 40,
    "totalStages": 53
  }
}
```

### 8. å¯¼å‡ºæ‰€æœ‰æ•°æ®

```
GET /api/export
```

è¿”å›ZIPæ–‡ä»¶ä¸‹è½½ã€‚

## ğŸ“Š æ•°æ®ç»“æ„

### å›¢é˜Ÿä¿¡æ¯ (TeamInfo)
```json
{
  "school": "å­¦æ ¡åç§°",
  "grade": "å¹´çº§",
  "className": "ç­çº§",
  "stoveNumber": "ç‚‰å·",
  "memberCount": 4,
  "memberNames": "æˆå‘˜å§“åï¼ˆé€—å·åˆ†éš”ï¼‰"
}
```

### è¿‡ç¨‹è®°å½• (ProcessRecord)
```json
{
  "teamInfo": {...},
  "startTime": 1705296000000,
  "endTime": 1705300000000,
  "stages": {
    "PREPARATION": {
      "stage": "PREPARATION",
      "startTime": 1705296000000,
      "endTime": 1705296300000,
      "selfRating": 4,
      "selectedTags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
      "notes": "åšå¾—å¥½çš„åœ°æ–¹",
      "problemNotes": "éœ€è¦æ”¹è¿›çš„åœ°æ–¹",
      "isCompleted": true,
      "mediaItems": [
        {
          "path": "æ–‡ä»¶è·¯å¾„",
          "type": "PHOTO",
          "timestamp": 1705296000000
        }
      ]
    }
  },
  "currentStage": "PREPARATION",
  "overallNotes": "æ€»ä½“å¤‡æ³¨"
}
```

### è¯¾åæ€»ç»“ (SummaryData)
```json
{
  "answer1": "ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆ",
  "answer2": "ç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆ",
  "answer3": "ç¬¬ä¸‰ä¸ªé—®é¢˜çš„ç­”æ¡ˆ",
  "photos1": ["ç…§ç‰‡è·¯å¾„1", "ç…§ç‰‡è·¯å¾„2"],
  "photos2": ["ç…§ç‰‡è·¯å¾„3"],
  "photos3": ["ç…§ç‰‡è·¯å¾„4"]
}
```

### æ•™å¸ˆè¯„ä»· (TeacherEvaluation)
```json
{
  "stage": "PREPARATION",
  "rating": 4,
  "comment": "è¯„ä»·å†…å®¹",
  "strengths": "ä¼˜ç‚¹",
  "improvements": "éœ€è¦æ”¹è¿›çš„åœ°æ–¹",
  "timestamp": 1705296000000
}
```

## ğŸ”§ é…ç½®è¯´æ˜

ç¼–è¾‘ `config.py` å¯ä»¥ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

- `PORT`: æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤5000ï¼‰
- `DEBUG`: è°ƒè¯•æ¨¡å¼ï¼ˆé»˜è®¤Falseï¼‰
- `DATA_DIR`: æ•°æ®å­˜å‚¨ç›®å½•
- `MEDIA_DIR`: åª’ä½“æ–‡ä»¶ç›®å½•

## ğŸ“ ä½¿ç”¨æµç¨‹

### å­¦ç”Ÿç«¯æµç¨‹ï¼š
1. å­¦ç”Ÿå®Œæˆæ‰€æœ‰æ•°æ®å½•å…¥
2. ç‚¹å‡»"æäº¤ç»™æ•™å¸ˆ"æŒ‰é’®
3. è¾“å…¥æœåŠ¡å™¨IPåœ°å€ï¼ˆä¾‹å¦‚ï¼š192.168.1.100ï¼‰
4. ç­‰å¾…ä¸Šä¼ å®Œæˆ

### æ•™å¸ˆç«¯æµç¨‹ï¼š
1. å¯åŠ¨æœåŠ¡å™¨ï¼ˆç¬”è®°æœ¬ï¼‰
2. åœ¨æ•™å¸ˆç«¯APPä¸­è¾“å…¥æœåŠ¡å™¨IPåœ°å€
3. æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿæ•°æ®
4. å¯¹æ¯ä¸ªç»„è¿›è¡Œè¯„ä»·
5. è¯„ä»·æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æœåŠ¡å™¨

## ğŸ› ï¸ ç»´æŠ¤å’Œæ‰©å±•

### æ•°æ®ç»“æ„ä¿®æ”¹

å¦‚æœéœ€è¦ä¿®æ”¹æ•°æ®ç»“æ„ï¼Œåªéœ€ä¿®æ”¹ `models.py` ä¸­çš„ç›¸åº”ç±»ï¼Œç¡®ä¿ä¸Androidç«¯ä¿æŒä¸€è‡´ã€‚

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `app.py` ä¸­æ·»åŠ æ–°çš„è·¯ç”±
2. åœ¨ `storage.py` ä¸­æ·»åŠ ç›¸åº”çš„æ•°æ®æ“ä½œæ–¹æ³•
3. æ›´æ–°APIæ–‡æ¡£

### æ•°æ®å¤‡ä»½

æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ `data/` ç›®å½•ä¸‹ï¼Œå®šæœŸå¤‡ä»½è¯¥ç›®å½•å³å¯ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿ç¬”è®°æœ¬å’Œå­¦ç”Ÿç«¯/æ•™å¸ˆç«¯åœ¨åŒä¸€å±€åŸŸç½‘
2. **é˜²ç«å¢™**ï¼šå¯èƒ½éœ€è¦å…è®¸Pythoné€šè¿‡é˜²ç«å¢™
3. **ç«¯å£å ç”¨**ï¼šå¦‚æœ5000ç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ `config.py` ä¸­çš„ `PORT`
4. **æ•°æ®å®‰å…¨**ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®æ·»åŠ èº«ä»½éªŒè¯

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚

## ğŸ“„ è®¸å¯è¯

ä¸ä¸»é¡¹ç›®ä¿æŒä¸€è‡´ã€‚

